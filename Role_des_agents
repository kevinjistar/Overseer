---
Document: Role_des_agents
Version: 1.0.0
Date: 2025-12-21

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document définit les rôles, capacités, contraintes et interdictions applicables aux agents dans l’architecture Overseer.

Un agent est un exécutant cognitif strictement contrôlé.
Un agent:
• ne décide pas,  
• ne valide pas,  
• n’interprète pas de logique métier,  
• n’exécute aucune logique structurelle,  
• ne modifie aucune donnée persistée,  
• n’agit jamais sans instruction formelle.

Un agent produit exclusivement une sortie JSON stricte, conforme aux schémas et aux contraintes injectées par Overseer.

---

2. Définition d’un agent

Un agent est une unité de production ou d’évaluation appelée exclusivement par l’orchestrateur, sur ordre explicite d’Overseer.

Un agent:
• ne reçoit jamais l’utilisateur comme source directe,  
• n’a pas d’accès direct à Firestore,  
• ne dispose pas d’autonomie d’action,  
• n’exécute aucune transition workflow,  
• ne peut pas appeler un autre agent.

Toute autonomie implicite est interdite.

---

3. Classification officielle des agents

Il existe exactement quatre familles d’agents.

3.1 AgentsProducteurs
Définition:
Produisent un document candidat complet, strictement conforme au schéma attendu, et destiné à une validation puis une écriture potentielle dans Firestore.

Interdictions:
Un AgentProducteur ne décide jamais, ne valide jamais et n’écrit jamais dans Firestore.

3.2 AgentsValidateurs
Définition:
Produisent un verdict sémantique structuré allow, warn ou block, sans produire de document candidat destiné à Firestore.

Membres (liste exhaustive):
• SuperiorValidationAgent

Interdictions:
Un AgentValidateur ne modifie jamais Firestore, ne produit jamais de document candidat et ne déclenche jamais de workflow.

3.3 AgentsCorrectifs
Définition:
Produisent un document candidat de correction uniquement lorsque operationMode = "correction" (CorrectionMode_Policy).

Membres (liste exhaustive):
• CorrectiveAgent

Interdictions:
Un AgentCorrectif n’est jamais appelé hors mode correction, il ne prend aucune initiative, il n’écrit jamais dans Firestore.

3.4 AgentsTransformateurs
Définition:
Produisent un output éphémère, non versionné, non persisté en tant que document référent, destiné à une consommation immédiate par Overseer.

Membres (liste exhaustive):
• ContextAgent
• AuditTrailAgent
• CahierDesChargesAgent

Règles strictes:
• Un AgentTransformateur ne produit JAMAIS de document candidat destiné à Firestore.
• Un AgentTransformateur ne produit JAMAIS de verdict allow, warn ou block.
• Un AgentTransformateur ne modifie jamais Firestore.
• L’output d’un AgentTransformateur est éphémère; seule une journalisation de métadonnées d’appel est autorisée.

Interdictions:
• Aucune autre famille n’est autorisée.
• Aucun agent hybride n’est autorisé.

---

4. AgentsProducteurs

4.1 Mission

Un AgentProducteur génère un document référent complet à partir:
• d’un document original (lorsqu’il existe),  
• d’une systemInstruction formelle et non ambiguë fournie par Overseer,  
• du schéma universel du Document Référent,  
• du module spécialisé applicable,  
• des règles d’édition issues de System_Agent_Edit_Policy injectées dans l’instruction.

Un AgentProducteur ne:
• modifie jamais Firestore,  
• ne voit jamais l’utilisateur,  
• ne reçoit jamais un contexte projet complet,  
• ne déduit jamais une intention métier.

Sortie unique attendue:
• un JSON strict contenant un candidateDocument complet, sans texte libre.

4.2 Capacités autorisées

L’AgentProducteur peut uniquement:
• compléter un document référent,  
• ajuster des sections de structured et specialized selon l’instruction,  
• produire un JSON strict complet et validable,  
• appliquer les règles d’édition injectées,  
• respecter les contraintes de non création, non suppression et non restructuration.

Toute capacité non explicitement listée ici est interdite.

4.3 Contraintes structurelles obligatoires

Un AgentProducteur doit respecter strictement:
• le schéma universel du Document Référent,  
• le module spécialisé applicable,  
• l’absence de champs inconnus ou non autorisés,  
• la forme globale du document (zones attendues, types, structure),  
• les clés protégées injectées comme immuables (incluant au minimum meta.id, meta.projectId, meta.createdAt),  
• l’interdiction de changer l’arborescence structurelle attendue,  
• l’interdiction de créer ou supprimer des documents,  
• l’interdiction de fusionner ou scinder des documents.

Toute violation:
• est rejetée par la validation structurelle de l’orchestrateur,  
• ne peut pas être “corrigée” automatiquement par l’agent.

4.4 Contraintes métier obligatoires

Un AgentProducteur ne peut jamais:
• déduire ou reformuler l’intention utilisateur,  
• définir ou décider une stratégie, une architecture, un parcours métier ou une priorité,  
• stabiliser ou corriger un projet de sa propre initiative,  
• déterminer un type de versioning (Major, Minor, Patch),  
• déclencher, interpréter ou proposer une transition workflow,  
• appliquer une Policy par interprétation autonome,  
• “améliorer” un document par optimisation personnelle,  
• combiner plusieurs documents ou propager des changements inter-documents,  
• introduire de nouvelles règles ou invariants non demandés.

L’AgentProducteur suit l’instruction de manière stricte et littérale.
Toute initiative non demandée est interdite.

4.5 Comportement en mode correction

Lorsque operationMode = "correction" est injecté par Overseer:
• seuls des ajustements minimaux et strictement correctifs sont autorisés,  
• aucune créativité n’est autorisée,  
• aucune restructuration n’est autorisée,  
• aucune extension non demandée n’est autorisée.

Toute proposition dépassant la correction demandée est interdite.

---

5. AgentsValidateurs

5.1 AgentValidateur officiel

Il n’existe qu’un seul AgentValidateur officiel:
• SuperiorValidationAgent

Tout autre agent validateur est interdit.

SuperiorValidationAgent:
• n’écrit jamais en base,  
• ne modifie jamais de document,  
• ne produit jamais de candidateDocument, y compris en CorrectionMode,  
• ne déclenche jamais de workflow,  
• ne déclenche jamais de correction.

Il retourne uniquement un verdict structuré.

5.2 Mission du SuperiorValidationAgent

SuperiorValidationAgent évalue, selon la ValidationPolicy_Global injectée et les contextes fournis par Overseer:
• la cohérence locale (document original vs document candidat vs diff),  
• la cohérence globale (ensemble du projet lorsque requis),  
• les contradictions explicites,  
• les risques,  
• les impacts workflow,  
• la conformité sémantique aux contraintes de Policies actives.

SuperiorValidationAgent n’est jamais un décideur.
Il ne choisit jamais d’appliquer, corriger ou annuler.

5.3 Sortie attendue

SuperiorValidationAgent retourne strictement un verdict structuré de la forme:

{
  "verdict": "allow | warn | block",
  "reasons": [...],
  "riskLevel": "low | medium | high",
  "workflowImpact": "none | minor | major",
  "impactedDocuments": [...],
  "recommendedFixes": [...]
}

Aucun autre format n’est autorisé.
Aucun texte libre hors structure n’est autorisé.

---

6. AgentsCorrectifs

6.1 AgentCorrectif officiel

Il n’existe qu’un seul AgentCorrectif officiel:
• CorrectiveAgent

Tout autre agent correctif est interdit.

CorrectiveAgent est un AgentProducteur spécialisé pour operationMode = "correction". Son contrat détaillé reste défini dans la spec dédiée, sans duplication dans le présent document.

CorrectiveAgent:
• produit un candidateDocument strictement correctif uniquement lorsque operationMode = "correction",  
• n’écrit jamais en base (toute écriture est effectuée par l’orchestrateur),  
• ne déclenche jamais de workflow,  
• ne décide jamais d’appliquer une correction.

6.2 Contraintes renforcées

En operationMode = "correction", CorrectiveAgent:
• applique des modifications minimales, ciblées et strictement nécessaires,  
• n’introduit aucune évolution conceptuelle, stratégique ou architecturale,  
• ne restructure jamais globalement un document,  
• n’étend jamais le périmètre de l’instruction,  
• ne propose jamais une refonte,  
• retourne un JSON strict complet sans texte libre.

CorrectiveAgent est appelé uniquement sur instruction explicite d’Overseer.
La validation sémantique de toute correction est effectuée par SuperiorValidationAgent.

---

7. Rôles interdits à tous les agents

Les agents ne peuvent en aucun cas:
• modifier Firestore,  
• appeler un autre agent,  
• déclencher un workflow,  
• décider une transition,  
• choisir un type de versioning,  
• appliquer une Policy par interprétation autonome,  
• interpréter des erreurs structurelles (c’est une responsabilité orchestrateur),  
• corriger automatiquement du contenu sans instruction explicite,  
• altérer ou redéfinir des schémas,  
• changer un mode système (normal, correction, sync, creation),  
• exécuter une réparation structurelle,  
• produire une sortie non JSON lorsque JSON est exigé.

Toute tentative est rejetée, ignorée ou bloquée selon les contrôles structurels et les règles d’édition injectées.

---

8. Supervision des agents

8.1 Rôle d’Overseer

Overseer:
• sélectionne l’agent,  
• prépare une systemInstruction complète,  
• injecte les contraintes pertinentes issues de System_Agent_Edit_Policy et des Policies nécessaires,  
• impose operationMode,  
• impose les contraintes de structure et de production,  
• déclenche la validation sémantique via SuperiorValidationAgent,  
• prend la décision finale apply, correction ou abort.

Overseer est l’unique autorité métier.
Aucun agent n’est autonome.

8.2 Rôle de l’orchestrateur

L’orchestrateur:
• appelle les agents sur ordre explicite d’Overseer,  
• reçoit la sortie JSON,  
• valide structurellement (schéma, types, champs, méta, conformité),  
• refuse tout contenu illégal ou non conforme,  
• journalise l’opération,  
• n’interprète aucune sémantique.

L’orchestrateur ne décide jamais d’appliquer une modification.

---

9. Invariants du rôle des agents

Toujours vrais:

• Un agent ne voit jamais l’utilisateur comme source directe.  
• Un agent n’a jamais accès direct à Firestore.  
• Un agent ne décide jamais du métier.  
• Un agent renvoie toujours un JSON complet lorsque requis.  
• Un agent n’ajoute jamais de champs non autorisés.  
• SuperiorValidationAgent ne produit jamais de documents, y compris en CorrectionMode.  
• CorrectiveAgent est le seul agent autorisé à produire une correction en operationMode = "correction".  
• Aucun agent ne peut modifier le système lui-même.  
• Overseer reste l’unique autorité métier.
• Tout agent qui ne correspond pas strictement à une des quatre familles définies est invalide.

---
Fin du document
---

Document Metadata & Changelog

Changelog:
  - 1.0.0 (2025-12-20) : Initialisation de la version de référence du document.

Breaking Changes:
  - Aucun (baseline pré-système)
