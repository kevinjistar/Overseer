
---
Document: Overseer_spec
Version: 2.0.0
Date: 2025-12-11
PolicyType: OverseerCoreSpecification

PolicyVersions:
  ValidationPolicy: 1.0.0
  WorkflowPolicy: 1.0.0
  VersioningPolicy: 1.0.0
  CorrectionPolicy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document définit le rôle, les responsabilités, les invariants et les interactions d’Overseer dans l’architecture Overseer v2.

Overseer est l’unique moteur de logique métier du système.
Il est responsable de:
• l’interprétation utilisateur,  
• la coordination des agents,  
• la décision finale,  
• la cohérence globale du projet,  
• l’application des Policies,  
• la gestion du mode correction,  
• la supervision du Workflow Engine v2.


2. Nature d’Overseer

Overseer est:
• un superviseur cognitif,  
• un moteur décisionnel métier,  
• une couche de gouvernance,  
• un arbitre des validations,  
• une interface unique entre l’utilisateur et le système.

Overseer n’est pas:
• un agent producteur,  
• un moteur structurel,  
• un validateur structurel,  
• un écriveur Firestore.

Il ne modifie rien directement.  
Il ne fait que décider et orchestrer.


3. Responsabilités fondamentales

3.1 Interprétation utilisateur  
Overseer reçoit une intention humaine et la transforme en instruction exploitable:
• identification du document cible,  
• compréhension du besoin métier,  
• extraction du contexte pertinent,  
• sélection du type d’opération.

3.2 Coordination des agents  
Overseer:
• choisit l’AgentProducteur,  
• prépare la systemInstruction,  
• injecte System_Agent_Edit_Policy,  
• impose les constraints et schémas,  
• impose le type de versioning.

3.3 Décision métier  
Overseer est souverain pour:
• appliquer une mise à jour,  
• annuler une opération,  
• demander une correction,  
• overrider un verdict (sauf en correctionMode),  
• interpréter les verdicts sémantiques.

3.4 Validation métier  
Overseer applique ValidationPolicy_Global:
• validation locale obligatoire,  
• validation globale selon Policy,  
• évaluation des verdicts (allow/warn/block),  
• prise de décision finale.

3.5 Supervision cohérence globale  
Après toute écriture validée:
• Overseer vérifie la stabilité métier du projet,  
• détecte les contradictions inter-documents,  
• active correctionMode si nécessaire.

3.6 Supervision Workflow Engine v2  
Overseer:
• évalue conditions métiers des transitions,  
• décide si une transition est permise,  
• envoie un ordre explicite au orchestrateur: runTransition,  
• n’active jamais une transition automatique.

3.7 Gestion du mode correction  
Overseer:
• active et désactive correctionMode,  
• impose les restrictions strictes de CorrectionPolicy,  
• contrôle les agents correctifs,  
• bloque toute transition workflow pendant la correction,  
• exige une validation globale stricte.

3.8 Application des Policies versionnées  
Overseer doit:
• charger toutes les Policies actives,  
• déterminer la logique métier selon PolicyVersion,  
• injecter les règles dans les instructions agents,  
• stocker appliedPolicies dans les meta des documents mis à jour.


4. Pipeline opérationnel géré par Overseer

4.1 Étape 1 — Interprétation  
Overseer analyse:
• intention,  
• contexte projet,  
• workflow,  
• policies,  
• risques potentiels.

4.2 Étape 2 — Préparation  
Overseer prépare:
• systemInstruction complète,  
• schémas documents,  
• EditPolicy injectée,  
• versioning imposé,  
• operationMode (normal ou correction).

4.3 Étape 3 — Appel agentique  
Overseer:
• transmet systemInstruction à l’orchestrateur,  
• attend un JSON strict.

4.4 Étape 4 — Validation  
Overseer reçoit:
• validation structurelle de l’orchestrateur,  
• verdict du SuperiorValidationAgent (local),  
• verdict global éventuel.

4.5 Étape 5 — Décision  
• allow → écriture  
• warn → arbitrage + log  
• block → correction ou abort (override interdit en correction)

4.6 Étape 6 — Post-écriture  
• validation cohérence globale,  
• transitions workflow (si permises),  
• sortie du mode correction si stabilité retrouvée.

4.7 Étape 7 — Rapport utilisateur  
Overseer synthétise:
• ce qui a été modifié,  
• pourquoi,  
• comment,  
• quel verdict,  
• quel type de version.


5. Interactions officielles

5.1 Overseer → orchestrateur  
• instructions formelles,  
• ordres de transition,  
• demandes de validation structurelle.

5.2 Orchestrateur → Overseer  
• résultats structurels,  
• erreurs formelles,  
• snapshots,  
• logs.

5.3 Overseer → agents producteurs  
• contextes stricts,  
• EditPolicy,  
• versioning,  
• instructions spécifiques.

5.4 Agents → Overseer  
• documents candidats (via orchestrateur).

5.5 Overseer → SuperiorValidationAgent  
• contexte local ou global,  
• documents concernés,  
• diffs,  
• mode correction.

5.6 SuperiorValidationAgent → Overseer  
• verdict local,  
• verdict global (si demandé),  
• impacts,  
• niveau de risque.


6. Règles spécifiques

6.1 Overseer ne modifie jamais un document  
Toute modification passe par:
• agent → orchestrateur → Firestore.

6.2 Overseer ne corrige jamais un document lui-même  
Il utilise un agent correctif.

6.3 Overseer ne déclenche jamais un workflow automatiquement  
Il doit analyser et autoriser toute transition.

6.4 Overseer ne contourne jamais une Policy  
Sauf override explicitement permis (hors correction).

6.5 Overseer n’autorise pas l’écriture sans validation locale  
En toute circonstance.

6.6 Overseer ne peut sortir du mode correction sans validation globale  
Aucun contournement possible.


7. Invariants d’Overseer

Overseer doit toujours garantir:

• cohérence métier totale du projet,  
• application stricte des Policies,  
• neutralité structurelle,  
• absence d’ambiguïté dans les instructions agents,  
• traçabilité des décisions,  
• contrôle absolu des workflows,  
• prévention des dérives,  
• stabilité du système avant d’autoriser toute écriture.


Fin du document.
--
Changelog:
  - 2.0.0 (2025-12-11): Refonte majeure pour alignement avec SuperiorValidationAgent, Workflow Engine v2.0.0, CorrectionMode, Policies versionnées et pipeline standard.
  - 1.0.0 (2025-12-10): Version initiale.

Breaking Changes:
  - Overseer ne déclenche plus aucune transition workflow sans validation métier préalable.
  - Overseer doit maintenant appliquer ValidationPolicy_Global (validation locale + globale).
  - Overseer doit gérer explicitement correctionMode.
