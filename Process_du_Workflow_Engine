
---
Document: Process_du_Workflow_Engine
Version: 2.0.0
Date: 2025-12-11

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

# Processus du Workflow Engine

## Objet du document

Ce document décrit le processus opérationnel complet de gestion des transitions du Workflow Engine dans le système Overseer.

## Rôle du document dans le système

Niveau: procédural et normatif.  
Ce document formalise la manière dont les transitions de workflow sont demandées, validées et exécutées, en précisant les rôles respectifs d’Overseer, de l’orchestrateur et du SuperiorValidationAgent.  
Il ne définit aucune logique métier, aucune condition dynamique et ne transforme jamais le Workflow Engine en moteur décisionnel.

---

# Processus du Workflow Engine

Le Workflow Engine est une structure déclarative d’états et de transitions, exécutée exclusivement sur ordre explicite d’Overseer et appliquée mécaniquement par l’orchestrateur.

---

# 1. Principes fondamentaux

- Le Workflow Engine ne contient aucune logique métier.  
- Aucune transition n’est déclenchée automatiquement.  
- Toute transition est décidée par Overseer.  
- L’orchestrateur applique uniquement des règles structurelles.  

Le Workflow Engine n’est jamais un moteur métier.

---

# 2. Pré-requis à toute transition

Avant toute demande de transition, Overseer doit vérifier:

- la cohérence métier de l’intention,
- la conformité avec WorkflowPolicy,
- la validation structurelle des documents concernés,
- la validation sémantique locale si requise,
- la validation globale si exigée par ValidationPolicy_Global,
- l’absence de correctionMode actif,
- l’absence d’état halted.

Aucune transition n’est permise si correctionMode = true.

---

# 3. Ordre formel de transition (Overseer)

Lorsqu’une transition est jugée pertinente, Overseer émet un ordre explicite contenant:

- projectId  
- operationId  
- transitionId  
- policies actives  

Cet ordre est transmis à l’orchestrateur.

---

# 4. Vérifications structurelles par l’orchestrateur

À réception de l’ordre, l’orchestrateur vérifie:

- l’existence de la transition,
- la correspondance avec l’état courant,
- la validité de l’état cible,
- la conformité structurelle des actions associées.

Aucune logique métier n’est évaluée.

---

# 5. Application de la transition

Si toutes les vérifications réussissent, l’orchestrateur:

- met à jour l’état du workflow,
- exécute les actions structurelles déclarées,
- crée les snapshots requis,
- journalise l’opération.

En cas d’erreur structurelle, la transition est refusée et l’état reste inchangé.

---

# 6. Rôle du SuperiorValidationAgent

Le SuperiorValidationAgent n’intervient jamais pendant l’exécution d’une transition.

Il intervient uniquement en amont, lorsque Overseer doit décider:
- si la transition est cohérente métier,
- si elle crée un risque de contradiction globale,
- si elle est compatible avec les documents structurants.

---

# 7. Gestion du mode correction

Lorsque correctionMode = true:

- aucune transition workflow n’est autorisée,
- toute demande de transition est ignorée par l’orchestrateur,
- seules des opérations de stabilisation documentaire sont permises.

Une transition ne peut être appliquée qu’après sortie explicite du mode correction.

---

# 8. Complétion et retour à Overseer

Après exécution, l’orchestrateur retourne à Overseer:

- l’état final du workflow,
- les actions exécutées,
- les identifiants de snapshot,
- les logs associés,
- toute erreur structurelle éventuelle.

Overseer décide ensuite des suites à donner.

---

# 9. Anti-boucle et sécurité

Le processus impose:

- aucune transition répétitive non justifiée,
- aucun aller-retour automatique d’états,
- aucun déclenchement implicite,
- aucune transition sans décision explicite.

Toute suspicion de boucle déclenche une analyse et peut mener à correctionMode.

---

# 10. Invariants du processus

Toujours vrais:

- aucune transition automatique,
- aucune logique métier dans le workflow,
- aucune décision côté orchestrateur,
- Overseer est souverain sur les transitions,
- exécution strictement structurelle,
- traçabilité complète via logs et snapshots.

---

Fin du document
---

Document Metadata & Changelog

Changelog:
  - 2.0.0 (2025-12-11): Refonte complète du processus du Workflow Engine pour alignement avec Overseer v2, SuperiorValidationAgent et Workflow Engine v2.
  - 1.0.0 (2025-12-10): Version initiale du processus du Workflow Engine.

Breaking Changes:
  - Suppression de toute condition métier et de tout déclenchement automatique des transitions.
