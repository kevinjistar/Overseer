
PIPELINE D’ENTRÉE DES PROJETS

Version: 1.0.0
Date: 2025-12-09
Changelog:
	•	1.0.0 (2025-12-09): Création du pipeline d’entrée des projets
Breaking Changes: Aucun

⸻

1. Intention du Pipeline d’entrée

Définir comment un projet arrive dans le système, avec une procédure immuable qui garantit:
	•	cohérence
	•	conformité technique
	•	contexte propre
	•	documents initiaux présents
	•	workflow prêt
	•	agents opérationnels
	•	pas de travail dans le vide

Ce pipeline est obligatoire pour créer ou importer un projet.
Aucun agent ne peut travailler tant qu’un projet n’a pas été introduit via ce pipeline.

⸻

2. Étapes du Pipeline d’entrée des projets

Voici la procédure officielle.
C’est elle que GAS devra implémenter dans Cloud Functions et que Overseer devra exiger.

Étape 1 — Réception de la demande

Un projet peut entrer dans le système via:
	•	une création manuelle par toi
	•	l’import d’un dossier de projet existant
	•	une duplication d’un projet modèle

Overseer valide que la demande est cohérente.

Étape 2 — Création de la structure Firestore

Création automatique dans Firestore:

projects/{projectId}/
    meta/
    documents/
    workflowEngine/
    logs/
    settings/

Overseer ne le fait pas.
C’est l’orchestrateur via Cloud Functions.

Étape 3 — Création des documents référents initiaux

Pour chaque projet, on génère automatiquement:
	•	Document_Architecture
	•	Document_UX
	•	Document_Stratégie
	•	Document_Workflow
	•	Document_Notes

Tous suivent le Schéma universel + leur module spécialisé.

Étape 4 — Initialisation du versioning

Chaque document initial est créé avec:

version: "1.0.0"
status: "active"
ownerAgent: "SystemInit"
createdAt: date du jour
updatedAt: date du jour
changelog:
  - 1.0.0 (date du jour): Initialisation du document

(Overseer rappellera cela, l’orchestrateur l’appliquera.)

Étape 5 — Création du Workflow Engine par défaut

Chaque projet doit inclure un workflow Engine fonctionnel, même minimal, par exemple:
	•	initialState: draft
	•	états: draft, active
	•	transitions: draft → active

Cela empêche les workflows “vides”.

Étape 6 — Snapshot initial obligatoire

L’orchestrateur crée un premier snapshot pour:
	•	chaque document référent
	•	le workflow Engine
	•	le meta projet

Cela permet un rollback propre dès le départ.

Étape 7 — Vérification par Overseer

Overseer effectue:
	•	audit de cohérence
	•	audit de structure
	•	audit des liens
	•	vérification du versioning
	•	confirmation de la date du jour
	•	rappel des agents disponibles

Étape 8 — Activation du projet comme currentProject

Overseer marque ce projet comme actif dans:

userContext/{yourUserId}/currentProject

Étape 9 — Log système

Création automatique:

logs/projectCreated

Avec:
	•	id projet
	•	date
	•	méthode d’entrée
	•	version initiale
	•	agents qui interviendront

⸻

3. Règles immuables du Pipeline d’entrée

Ces règles seront intégrées dans Overseer et l’orchestrateur.
	1.	Aucun projet ne peut être utilisé tant que le pipeline n’est pas terminé.
	2.	Aucun document ne peut être modifié avant création du snapshot initial.
	3.	Le versioning est toujours initialisé en 1.0.0.
	4.	ownerAgent = SystemInit lors de l’initialisation.
	5.	Le Workflow Engine doit exister avant toute action d’agent.
	6.	Le projet actif doit être explicitement défini.
	7.	Aucun agent ne peut agir sans contexte projet.

⸻

4. Comment Overseer utilise le Pipeline

Overseer ne crée pas les projets, il:
	•	valide ta demande
	•	empêche toute action si le pipeline n’est pas exécuté
	•	déclenche l’orchestrateur
	•	vérifie la cohérence
	•	active le projet
	•	prépare les agents

⸻

5. Comment l’orchestrateur utilise le Pipeline

L’orchestrateur:
	•	crée les documents
	•	crée la structure Firestore
	•	crée snapshots
	•	initialise versioning
	•	loggue
	•	valide les schémas
	•	prépare workflowEngine
	•	renvoie un statut propre à Overseer
