---
Document: Process_creation_d_un_projet
Version: 1.0.0
Date: 2025-12-20

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document définit le processus normatif, strict et non ambigu de création d’un nouveau projet dans le système Overseer.

Il décrit exclusivement:
- la séquence obligatoire des opérations,
- les responsabilités explicites de chaque composant,
- les invariants structurels et métier,
- les conditions d’activation d’un projet.

Ce processus est contractuel.  
Aucune création de projet ne peut exister hors de ce cadre.

---

2. Acteurs et responsabilités

2.1 Utilisateur  
- Fournit l’intention initiale de création.
- Ne crée jamais directement un projet.

2.2 Overseer  
- Interprète l’intention utilisateur.
- Décide de lancer ou non le processus de création.
- Gouverne toutes les décisions métier.
- Ordonne explicitement chaque étape.
- Ne crée jamais directement de données Firestore.

2.3 Orchestrateur  
- Exécute exclusivement des opérations structurelles.
- Crée les structures Firestore ordonnées par Overseer.
- Applique les schémas et écritures atomiques.
- Ne prend aucune décision métier.

2.4 Agents  
- Peuvent être sollicités par Overseer pour produire du contenu initial.
- Ne créent jamais de projet par eux-mêmes.

---

3. Déclenchement du processus

Le processus débute uniquement lorsque:
- un utilisateur exprime une intention explicite de création,
- Overseer valide la cohérence de cette intention,
- aucun état halted n’est actif,
- aucun projet n’est en cours de création concurrente.

Aucun déclenchement automatique n’est autorisé.

---

4. Étape 1 — Définition initiale du projet (Overseer)

Overseer collecte et valide les informations minimales suivantes:
- nom du projet,
- description courte,
- périmètre ou concept initial,
- identité de l’utilisateur créateur.

Overseer:
- valide la complétude minimale,
- refuse toute donnée ambiguë ou contradictoire,
- génère un projectId unique,
- fixe la date de création.

Aucune écriture Firestore n’a lieu à ce stade.

---

5. Étape 2 — Création de la structure Firestore (Orchestrateur)

Règle normative:
- workflowEngine doit être initialisé avant toute activation de projet et avant tout appel agentique.

Sur ordre explicite d’Overseer, l’orchestrateur initialise strictement l’arborescence suivante:

projects/{projectId}/
  meta/
    project.json
  documents/
    architecture.json
    ux.json
    strategy.json
    workflowDocument_{descripteur}.json
    notes.json
  workflowEngine/
    engine.json
  logs/
    creation.json
  snapshots/
    initial/

Règles normatives:
- projects/{projectId}/workflowEngine/engine.json est créé explicitement lors de l’initialisation.
- Il est interdit d’utiliser un document workflow comme moteur d’état lors de la création.

Aucune autre structure n’est autorisée.

Toutes les écritures sont atomiques et traçables.

---

5.1 Workflow Documents à la création

Règles normatives:
- Les Workflow Documents sont optionnels.
- Ils sont stockés sous projects/{projectId}/documents/ avec nommage workflowDocument_{descripteur}.json.

Règle de conformité:
- L’absence de Workflow Document n’empêche pas la création si workflowEngine existe et est valide.

---

5.2 Template de génération (création uniquement)

Règles normatives:
- utilisation autorisée une seule fois, pendant création
- transformation unidirectionnelle Workflow Document → workflowEngine
- interdiction inverse
- validation structurelle obligatoire
- traçabilité par log

---

6. Étape 3 — Initialisation des documents référents

Pour chaque document référent initial, l’orchestrateur écrit un document conforme:
- au Schéma universel du Document Référent,
- à son module spécialisé associé.

Chaque document initial contient obligatoirement:
- version: "1.0.0",
- status: "active",
- ownerAgent: "SystemInit",
- createdAt: date de création,
- updatedAt: date de création,
- changelog:
  - "1.0.0 (date): Initialisation du document".

Règle normative:
- workflowDocument_{descripteur}.json est un descripteur initial, il ne contient pas l’état courant.

Aucun contenu métier n’est inféré automatiquement.

---

7. Étape 4 — Initialisation du Workflow Engine

L’orchestrateur initialise un Workflow Engine minimal strictement conforme au Workflow Engine Schema actif.

État initial obligatoire:
- initialState: "draft"

État courant obligatoire:
- currentState: "draft"

États déclarés:
- draft
- active

Transitions autorisées:
- draft → active

Règles normatives:
- currentState est écrit dans projects/{projectId}/workflowEngine/engine.json.
- currentState ne peut pas être écrit, recopié, ou déduit depuis workflowDocument_{descripteur}.json.

Aucune condition métier n’est définie dans le workflow.

---

8. Étape 5 — Enregistrement du contexte projet

L’orchestrateur enregistre:
- les métadonnées projet,
- l’état initial,
- les références des documents créés,
- l’état courant du workflowEngine (currentState).

Le projet n’est pas encore actif comme contexte utilisateur.

---

9. Étape 6 — Création du snapshot initial

L’orchestrateur crée obligatoirement un snapshot initial complet contenant:
- meta projet,
- documents référents initiaux,
- workflow engine initial,
- log de création.

Ce snapshot est immuable.

---

10. Étape 7 — Vérification structurelle finale

L’orchestrateur valide strictement:
- conformité des schémas,
- présence de toutes les structures requises,
- cohérence des références internes,
- validité du versioning,
- absence de données manquantes,
- présence et lisibilité de projects/{projectId}/workflowEngine/engine.json.

En cas d’échec:
- le projet est marqué invalide,
- aucune activation n’est permise,
- Overseer est notifié.

---

11. Étape 8 — Journalisation de la création

L’orchestrateur écrit:
projects/{projectId}/logs/creation.json

Contenu obligatoire:
- projectId,
- date,
- utilisateur créateur,
- statut de création,
- schémas utilisés,
- versions actives des Policies.

---

12. Étape 9 — Activation du projet (décision Overseer)

L’activation du projet comme currentProject est:
- une décision explicite d’Overseer,
- optionnelle,
- impossible si une incohérence est détectée.

Condition normative:
- workflowEngine/engine.json doit exister et être valide avant toute activation.

Écriture cible:
userContext/{userId}/currentProject.json

Aucune activation automatique n’est autorisée.

---

13. Invariants du processus

Toujours vrais:

- Aucun projet n’est créé sans décision explicite d’Overseer.
- Aucune écriture Firestore hors orchestrateur.
- Aucune logique métier dans l’orchestrateur.
- Aucun agent ne crée de projet.
- workflowEngine est créé et initialisé avant toute activation de projet et avant tout appel agentique.
- Le workflowEngine porte l’état courant (currentState) dès l’initialisation.
- Le document workflowDocument_{descripteur}.json est un descripteur initial, il ne contient pas l’état courant.
- Il est interdit d’utiliser un document workflow comme moteur d’état lors de la création.
- Aucun projet actif sans snapshot initial valide.
- Toute création est traçable et reproductible.
- Toute dérive déclenche un refus ou une correction.

---
Fin du document
---

Document Metadata & Changelog

Changelog:
  - 1.0.0 (2025-12-20) : Initialisation de la version de référence du document.

Breaking Changes:
  - Aucun (baseline pré-système)
