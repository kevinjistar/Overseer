
---
Document: System_Agent_Edit_Policy
Version: 2.0.0
Date: 2025-12-15

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

# System_Agent_Edit_Policy

## 1. Objet du document

Ce document définit les règles normatives obligatoires que tout agent producteur doit respecter lorsqu’il produit une proposition de document candidat dans Overseer.

Ce document encadre:
- ce qu’un agent est autorisé à modifier,
- ce qu’un agent n’a pas le droit de modifier,
- ce qu’un agent doit toujours produire,
- le comportement obligatoire en mode correction,
- la séparation stricte entre décision métier (Overseer), exécution structurelle (orchestrateur) et production (agents).

## 2. Portée

Cette policy s’applique, sans exception:
- à tous les agents producteurs,
- à tous les documents référents,
- à tous les projets,
- à tous les modes d’opération, dont normal, correction et sync si un agent est appelé dans ce contexte.

Cette policy ne s’applique pas au SuperiorValidationAgent, qui ne produit pas de documents.

## 3. Principes non négociables

3.1 Aucun agent ne décide
- Un agent ne décide jamais du type de versioning.
- Un agent ne décide jamais d’une transition workflow.
- Un agent ne décide jamais d’appliquer ou rejeter une modification.

3.2 Aucun agent n’exécute
- Un agent n’écrit jamais dans Firestore.
- Un agent n’appelle jamais l’orchestrateur.
- Un agent n’appelle jamais un autre agent.

3.3 Un agent exécute une instruction
- Un agent ne travaille que sur la base d’une instruction explicite fournie via Overseer.
- Un agent ne déduit aucune intention implicite.
- Un agent ne comble aucun manque de contexte par extrapolation.

## 4. Responsabilités par acteur

4.1 Overseer
Overseer est responsable de:
- sélectionner l’agent producteur,
- fournir l’instruction formelle, le document original et le contexte autorisé,
- fournir les contraintes d’édition pertinentes,
- fournir le mode d’opération,
- fournir les contraintes de versioning attendues,
- déclencher la validation sémantique via SuperiorValidationAgent selon ValidationPolicy_Global,
- décider apply, correction, abort.

4.2 Orchestrateur
L’orchestrateur est responsable de:
- vérifier la validité structurelle du JSON retourné,
- refuser toute sortie non conforme au schéma,
- appliquer mécaniquement l’écriture si et seulement si Overseer ordonne apply,
- appliquer mécaniquement meta.version (valeur décidée par Overseer),
- appliquer mécaniquement meta.updatedAt (si requis par le pipeline),
- gérer les snapshots et la journalisation structurelle.

4.3 AgentProducteur
L’agent producteur est responsable de:
- produire un document candidat complet conforme aux schémas fournis,
- respecter strictement les champs protégés et les interdictions de cette policy,
- limiter ses modifications à l’intention explicitement formulée.

## 5. Entrées obligatoires d’un appel agent producteur

Un agent producteur doit recevoir, au minimum:
- un document original (ou une forme explicitement indiquée comme “document initial à générer”),
- le schéma universel applicable,
- le module specialized applicable,
- l’intention explicite de la modification,
- operationMode,
- les champs protégés et contraintes d’édition applicables,
- les contraintes de versioning attendues (niveau attendu, sans que l’agent modifie meta.version).

Si un de ces éléments est absent, l’agent doit produire une sortie conforme au schéma mais ne doit pas inventer des hypothèses pour compenser l’absence.

## 6. Règles structurelles obligatoires

6.1 Sortie complète
- L’agent doit retourner l’intégralité du document candidat, jamais un diff, jamais un fragment, jamais une section seule.

6.2 Respect strict des schémas fournis
- Aucun champ additionnel n’est autorisé.
- Aucune clé requise ne peut être supprimée.
- Aucune clé ne peut être renommée.
- La structure de la zone specialized doit respecter le module fourni.

6.3 Champs meta protégés
L’agent ne doit jamais modifier:
- meta.id
- meta.projectId
- meta.createdAt
- tout champ explicitement marqué “protected” dans les contraintes fournies par Overseer.

6.4 Champs meta sous contrôle d’Overseer et de l’orchestrateur
- L’agent ne modifie jamais meta.version.
- L’agent ne modifie meta.updatedAt que si l’instruction le demande explicitement.
- L’agent ne modifie pas les champs de gouvernance non explicitement autorisés par l’instruction.

6.5 Aucune restructuration
L’agent ne doit jamais:
- fusionner des sections,
- splitter une section en plusieurs sections,
- changer la hiérarchie des champs,
- convertir un type de champ sans instruction explicite.

## 7. Règles sémantiques obligatoires

7.1 Fidélité à l’intention
- L’agent doit exécuter l’intention déclarée par Overseer, strictement.
- L’agent ne reformule pas l’objectif en changeant sa portée.
- L’agent ne modifie pas l’orientation stratégique ou architecturale si ce n’est pas explicitement demandé.

7.2 Interdiction d’extrapolation
L’agent ne doit jamais:
- déduire un besoin non exprimé,
- “améliorer” un document en dehors de l’intention,
- ajouter des contraintes métier non demandées,
- corriger des incohérences qu’il constate si la correction n’est pas demandée.

7.3 Contradictions
- L’agent doit éviter les contradictions internes évidentes au sein du document candidat.
- Toute contradiction volontaire doit être explicitement demandée par Overseer.

## 8. Règles de versioning côté agent

8.1 Interdiction de décision
- Un agent ne décide jamais Major, Minor, Patch.

8.2 Contrainte de profondeur attendue
Quand Overseer impose un niveau de modification attendu, l’agent doit respecter la portée:
- Patch attendu: correction ciblée, aucun changement conceptuel, aucune restructuration.
- Minor attendu: ajouts compatibles et explicites uniquement si demandés.
- Major attendu: changements conceptuels uniquement si demandés et décrits explicitement.

8.3 Interdiction de manipulation de meta.version
- L’agent n’écrit pas meta.version, même s’il pense que le changement le justifie.

## 9. Mode correction

Lorsque operationMode = "correction":
- l’agent doit produire une correction minimale et ciblée,
- l’agent ne propose aucune amélioration non demandée,
- l’agent ne restructure rien,
- l’agent ne modifie pas des sections non concernées,
- la stabilité est prioritaire sur l’exhaustivité.

Toute modification non nécessaire à la correction demandée est interdite.

## 10. Format de sortie obligatoire

L’agent doit renvoyer exclusivement un JSON strict conforme au schéma fourni.

Interdictions:
- texte hors JSON,
- commentaires hors structure,
- diff textuel,
- réponse partielle.

## 11. Vérification et application

11.1 Vérification structurelle
- L’orchestrateur rejette toute sortie non conforme au schéma, sans interprétation.

11.2 Vérification sémantique
- SuperiorValidationAgent émet un verdict sémantique selon ValidationPolicy_Global.
- Un agent producteur n’évalue pas lui-même la cohérence globale.

11.3 Décision
- Overseer décide apply, correction ou abort.
- Un agent producteur n’a aucune autorité sur la décision.

## 12. Invariants

Toujours vrais:
- Un agent ne voit jamais l’utilisateur.
- Un agent ne lit jamais les specs et policies, il exécute une instruction injectée par Overseer.
- Un agent ne modifie jamais Firestore.
- Un agent ne décide jamais du versioning.
- Un agent retourne toujours un document complet conforme au schéma fourni.
- En mode correction, l’agent n’effectue que des corrections minimales et ciblées.
- Overseer est l’unique autorité métier, l’orchestrateur est l’unique exécuteur structurel.

---
Fin du document
---

Document Metadata & Changelog

Changelog:
  - 2.0.0 (2025-12-15): Refonte majeure pour normaliser le document au format canonique, remplacer les références implicites par une attribution explicite des responsabilités (Overseer, orchestrateur, agent), fermer strictement les règles structurelles, renforcer les interdictions d’extrapolation et formaliser le mode correction et le format de sortie.
  - 1.0.0 (2025-12-10): Création de la policy globale encadrant toutes les modifications de documents par les agents.

Breaking Changes:
  - Le document n’autorise plus aucune lecture directe de la policy par les agents; l’exécution est définie exclusivement via des règles injectées dans l’instruction par Overseer.
  - Les champs meta.version et meta.updatedAt sont explicitement interdits de modification par défaut côté agent; leur gestion est définie comme une responsabilité d’Overseer (décision) et de l’orchestrateur (application mécanique).
  - La sortie attendue est définie comme “JSON strict uniquement” sans exception, tout texte hors JSON est explicitement interdit.
