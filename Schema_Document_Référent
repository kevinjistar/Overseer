
---
Version: 1.1.0
Date: 2025-12-10
Changelog:
  - 1.1.0 (2025-12-10): Mise à jour du schéma universel, ajout compatibilité Sync, ProjectSchema 1.1.0, règles strictes pour versioning, cohérence avec Overseer et workflows
  - 1.0.0 (2025-12-10): Initialisation du Schéma universel du Document Référent
Breaking Changes: Aucun depuis 1.0.0
---

# SCHÉMA UNIVERSEL DU DOCUMENT RÉFÉRENT

Ce schéma définit la structure stable que tout Document Référent doit respecter.  
La zone specialized est la seule partie variable selon le type de document.  
Le schéma garantit cohérence multi-agents, validation automatique, robustesse du versioning, compatibilité Firestore et compatibilité Cloud Functions.

---

# 1. Description conceptuelle

Un Document Référent contient cinq blocs fondamentaux.

A. meta  
Informations de gouvernance:  
- id  
- type  
- projectId  
- version  
- status  
- createdAt  
- updatedAt  
- ownerAgent  

B. structured  
Sections structurées exploitables par les agents.

C. specialized  
Zone modulaire dépendant du type de document.

D. narrativeMarkdown  
Zone optionnelle en langage naturel, hors logique interne.

E. links  
Références internes ou externes.

---

# 2. JSON SCHEMA — UniversalDocumentSchema (Version 1.1.0)

{
  "title": "UniversalDocumentSchema",
  "type": "object",
  "required": ["meta", "structured", "specialized"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["id", "type", "projectId", "version", "status", "createdAt"],
      "properties": {
        "id": { "type": "string" },
        "type": { "type": "string" },
        "projectId": { "type": "string" },
        "version": { "type": "string" },
        "status": { 
          "type": "string",
          "enum": ["draft", "active", "archived"]
        },
        "createdAt": { "type": "string" },
        "updatedAt": { "type": "string" },
        "ownerAgent": { "type": "string" }
      }
    },

    "structured": {
      "type": "object",
      "required": ["sections"],
      "properties": {
        "sections": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["title", "content"],
            "properties": {
              "title": { "type": "string" },
              "content": {
                "type": "object",
                "description": "Contenu structuré libre, sous forme d'objet pour exploitation par les agents"
              },
              "notes": { "type": "string" }
            }
          }
        }
      }
    },

    "specialized": {
      "type": "object",
      "description": "Zone dédiée aux modules spécifiques (architecture, UX, stratégie, workflow, notes)"
    },

    "narrativeMarkdown": { 
      "type": "string",
      "description": "Zone narrative optionnelle"
    },

    "links": {
      "type": "array",
      "items": { "type": "string" }
    }
  }
}

---

# 3. Cohérence du système

Ce schéma:

- est compatible avec ProjectSchema 1.1.0  
- permet validation stricte par Cloud Functions  
- garantit que tous les documents ont une forme stable  
- rend le versioning automatique trivial  
- permet à Overseer de vérifier la conformité documentaire  
- permet aux agents spécialisés de modifier uniquement specialized + structured  
- s’intègre entièrement au Worklow Engine  
- est compatible avec le pipeline de synchronisation externe  

Fin du Schéma universel du Document Référent (Version 1.1.0).
