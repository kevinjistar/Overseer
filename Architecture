---
Document: Architecture
Version: 1.0.0
Date: 2025-12-20

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document décrit l’architecture conceptuelle du système Overseer.
Il définit les couches, leurs responsabilités respectives, leurs interactions et les invariants garantissant la cohérence globale du système.

Ce document est normatif sur la répartition des rôles, mais ne décrit pas les implémentations techniques détaillées ni les pipelines opérationnels.


2. Principe architectural fondamental

Le système Overseer repose sur une séparation stricte et non ambiguë des responsabilités.

Principe cardinal:

Overseer pense.  
Les agents produisent.  
L’orchestrateur exécute.  
Firestore persiste.

Aucune entité ne peut empiéter sur le rôle d’une autre.


3. Couches du système

3.1 Couche métier

Responsable:
• Overseer

Responsabilités:
• interprétation des intentions utilisateur,
• gouvernance et décision métier,
• sélection et orchestration des agents,
• détermination du versioning,
• évaluation des conditions métier,
• autorisation explicite des transitions de workflow,
• activation et désactivation des modes système.

Aucune logique structurelle ou d’exécution n’existe dans cette couche.


3.2 Couche de validation sémantique

Responsable:
• SuperiorValidationAgent

Responsabilités:
• validation de la cohérence sémantique locale,
• validation de la cohérence globale inter-documents,
• détection des contradictions et risques métier,
• analyse d’impact sur le workflow et les documents,
• émission de verdicts allow, warn ou block.

Cette couche n’écrit jamais, ne corrige jamais et ne décide jamais.


3.3 Couche structurelle

Responsable:
• Orchestrateur (Cloud Functions)

Responsabilités:
• validation structurelle des JSON,
• application mécanique du versioning,
• écriture atomique dans Firestore,
• gestion des snapshots et des logs,
• exécution strictement structurelle du Workflow Engine,
• gestion des états halted, warning et processing.

Aucune logique métier ne réside dans cette couche.


3.4 Couche de persistance

Responsable:
• Firestore

Responsabilités:
• stockage passif des données,
• conservation de l’historique,
• persistance des snapshots et des logs.

Aucune interprétation ni logique ne s’y trouve.


4. Architecture des agents

Les agents sont des fonctions LLM exécutives strictement contraintes.

Ils:
• ne prennent aucune initiative,
• ne valident rien,
• ne connaissent jamais l’utilisateur,
• ne voient que le document transmis,
• produisent uniquement du JSON complet et conforme.

Ils sont gouvernés exclusivement par System_Agent_Edit_Policy et pilotés par Overseer.


5. Architecture des workflows

Le Workflow Engine est une structure déclarative d’états et de transitions.

workflowEngine/engine.json est l’unique état courant et exécutable.
Les Workflow Documents sont des artefacts descriptifs, non exécutifs, non porteurs d’état.

• aucune condition métier n’est évaluée dans le workflow,
• aucune transition n’est déclenchée automatiquement,
• toute transition est décidée par Overseer,
• l’orchestrateur exécute uniquement la transition autorisée.

Le workflow n’est jamais un moteur métier.


6. Invariants architecturaux

Toujours vrais:

• aucune logique métier dans l’orchestrateur,
• aucune autonomie agentique,
• aucune écriture hors orchestrateur,
• aucune validation sémantique structurelle,
• aucune transition implicite,
• aucun état exécutable n’est stocké dans un document workflow,
• toute incohérence déclenche correction ou arrêt contrôlé.

---
Fin du document
---

Document Metadata & Changelog

Changelog:
  - 1.0.0 (2025-12-20): Initialisation de la version de référence du document.

Breaking Changes:
  - Aucun (baseline pré-système)
