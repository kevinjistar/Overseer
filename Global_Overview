---
Document: Global_Overview
Version: 2.1.0
Date: 2025-12-17

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document est la référence ultime décrivant l’architecture complète du système Overseer.

Il présente de manière unifiée et hiérarchique:
• la vision globale,  
• la structure conceptuelle,  
• le rôle de chaque entité,  
• les Policies qui gouvernent le système,  
• les processus opérationnels majeurs,  
• la logique fondamentale garantissant la cohérence et l’absence de dérive.

Toute autre documentation du projet doit être cohérente avec ce document maître.


2. Vision fondamentale du système

Overseer est un système multi-agents orchestré, conçu pour:
• maintenir une cohérence documentaire stricte,  
• gouverner l’évolution de projets complexes,  
• empêcher toute dérive autonome,  
• assurer une traçabilité complète et déterministe.

Il est structuré selon quatre couches:

1. Schémas  
2. Policies  
3. Intelligence métier (Overseer + SuperiorValidationAgent)  
4. Exécution structurelle (orchestrateur + Firestore)

Principe fondateur non négociable:

Overseer pense.  
Les agents produisent.  
L’orchestrateur exécute.  
Firestore persiste.

Aucune couche ne peut outrepasser son périmètre de responsabilité.


3. Architecture générale

L’architecture Overseer repose sur une séparation stricte de trois niveaux fonctionnels:

• Niveau métier  
• Niveau sémantique  
• Niveau structurel  

3.1 Niveau métier (Overseer)

Ce niveau porte exclusivement:
• la logique métier,  
• les décisions,  
• les transitions de workflow,  
• le choix du versioning,  
• le raisonnement global,  
• le contrôle final.

Overseer ne valide jamais un schéma et n’écrit jamais directement en base.

3.2 Niveau sémantique (SuperiorValidationAgent)

Ce niveau porte:
• la cohérence locale,  
• la cohérence globale,  
• la détection des contradictions,  
• l’évaluation des risques métier,  
• l’analyse d’impact sur les workflows.

Il ne modifie jamais Firestore et ne produit jamais de documents.

3.3 Niveau structurel (orchestrateur)

Ce niveau assure:
• la validation structurelle,  
• l’application mécanique des écritures,  
• la gestion des snapshots,  
• la journalisation,  
• l’exécution des transitions structurelles de workflow.

Il ne contient aucune logique métier et n’initie aucune action sans ordre explicite d’Overseer.


4. Rôles des entités du système

4.1 Overseer  
Centre unique de décision métier.  
Il:
• interprète l’intention utilisateur,  
• choisit les agents,  
• prépare les systemInstructions,  
• impose versioning et Policies,  
• déclenche les validations sémantiques,  
• autorise ou refuse les écritures,  
• gère correctionMode,  
• ordonne explicitement les transitions workflow.

4.2 AgentsProducteurs  
Ils produisent des documents JSON complets conformes aux schémas.  
Ils n’ont aucune autonomie et suivent strictement System_Agent_Edit_Policy.

4.3 SuperiorValidationAgent  
Il évalue la cohérence sémantique.  
Il retourne allow, warn ou block.  
Il ne décide jamais et n’écrit jamais.

4.4 Orchestrateur  
Il:
• valide structurellement,  
• écrit dans Firestore,  
• applique les transitions structurelles autorisées.

Il n’interprète rien.

4.5 Firestore  
Système de persistance passif, versionné et journalisé.


5. Les Policies versionnées

Les Policies gouvernent l’intégralité du comportement système.

Liste canonique:
• VersioningPolicy  
• WorkflowPolicy  
• ValidationPolicy_Global  
• CorrectionMode_Policy  
• System_Agent_Edit_Policy  
• Policies_Versioning_Spec  

Elles:
• ne sont jamais optionnelles,  
• doivent être chargées avant Overseer,  
• conditionnent tous les pipelines,  
• sont inscrites dans meta.appliedPolicies.


6. Workflow Engine v2

Le Workflow Engine v2 est une matrice d’états structurelle.  

workflowEngine est l’unique porteur d’état courant, tout état décrit ailleurs est non exécutif.

Il ne porte aucune condition métier.  
Toutes les décisions de transition sont prises par Overseer.

L’orchestrateur applique uniquement la transition ordonnée:
• état from → état to  
• actions structurelles (snapshot, log, callAgent)


7. Pipeline global d’une mise à jour documentaire

Le pipeline v2 suit la séquence:

1. Intention utilisateur  
2. Analyse métier par Overseer  
3. Préparation systemInstruction  
4. Appel agent via orchestrateur  
5. JSON produit  
6. Validation structurelle  
7. Validation sémantique locale  
8. Validation globale selon Policy  
9. Décision Overseer (apply / warn / block / correction)  
10. Écriture Firestore  
11. Transition workflow (si ordonnée)  
12. Vérification post-opération  

Tout document mis à jour déclenche potentiellement une transition, uniquement si Overseer l’autorise.

Toute transition qui modifie l’état courant s’applique exclusivement à workflowEngine/engine.json, aucun document workflow n’est un porteur d’état.


8. CorrectionMode

CorrectionMode est un état système destiné à restaurer une cohérence métier.

En correctionMode:
• aucune transition workflow  
• un seul agent correctif par cycle  
• validation globale obligatoire  
• restrictions maximales  
• sortie uniquement après stabilité confirmée


9. Sync externe

Lors d’une sync:

Règles normatives:
• la sync ne peut pas modifier l’état courant hors workflowEngine, et toute modification d’état doit viser exclusivement workflowEngine/engine.json,  
• les documents de type Workflow Document sont non exécutifs, ils ne portent jamais d’état courant.

• Overseer passe en mode sync  
• SuperiorValidationAgent analyse l’impact  
• aucune transition workflow  
• aucune écriture non validée

Le payload externe ne peut jamais restructurer le système.


10. Anti-dérive et protocole d’erreur

Deux niveaux stricts:

• dérive structurelle → orchestrateur (arrêt immédiat)  
• dérive métier → Overseer + SuperiorValidationAgent (correctionMode)

halted = état critique  
Seule systemRecovery permet de reprendre.


11. Mécanisme d’opérations

Toute opération comporte:
• projectId  
• operationId  
• appliedPolicies  
• snapshotId si applicable

Les opérations sont atomiques et traçables.


12. Cycle de vie complet d’un projet

1. Création via mode création  
2. Initialisation schémas + workflowEngine + snapshots  
3. Sélection d’un currentProject  
4. Travail quotidien via pipelines  
5. Sync externe si nécessaire  
6. Corrections via CorrectionMode  
7. Recovery si halted  
8. Avancement du workflow métier et structurel


13. Relations inter-documents et cohérence globale

• Schémas → cohérence structurelle  
• SuperiorValidationAgent → cohérence sémantique  
• Overseer → cohérence métier  

Aucune cohérence n’est déléguée.


14. Invariants fondamentaux du système

Toujours vrais:

• Aucun agent n’est autonome.  
• Overseer ne modifie jamais Firestore.  
• L’orchestrateur n’exécute aucune logique métier.  
• SuperiorValidationAgent ne modifie jamais les données.  
• Les workflows ne décident jamais par eux-mêmes.  
• Aucun état workflow exécutable n’existe hors workflowEngine.  
• Aucun document ne contourne les schémas.  
• Aucune transition ne se déclenche automatiquement.  
• Toute écriture est validée structurellement + sémantiquement.  
• Toute incohérence mène à correctionMode ou halted.  
• Les Policies gouvernent tout.  
• La traçabilité est obligatoire.  


15. Résumé exécutif (vision synthétique)

Le système Overseer est un OS multi-agents déterministe, structuré en:

1. Règles structurelles → orchestrateur  
2. Intelligence métier → Overseer  
3. Analyse sémantique → SuperiorValidationAgent  
4. Production documentaire → agents producteurs  
5. Persistance déterministe → Firestore

Les documents, workflows, validations, policies, corrections et synchronisations fonctionnent dans une boucle entièrement contrôlée par Overseer.

---
Fin du document
---

Document Metadata & Changelog

Changelog:
  - 2.1.0 (2025-12-17): Ajout d’invariants explicitant workflowEngine comme unique état exécutable, clarification du statut descriptif des Workflow Documents, correction du footer incohérent.
  - 2.0.0 (2025-12-11): État initial du document Global_Overview dans le corpus.

Breaking Changes:
  - Aucun depuis 2.0.0
