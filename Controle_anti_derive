---
Document: Controle_anti_derive
Version: 2.0.2
Date: 2025-12-12

PolicyVersions:
  ValidationPolicy_Global: 1.0.0
  WorkflowPolicy: 1.0.0
  CorrectionMode_Policy: 1.0.0
  System_Agent_Edit_Policy: 1.0.0
---

1. Objet du document

Ce document définit les mécanismes normatifs de détection, de qualification et de traitement des dérives dans le système Overseer.

La dérive est strictement segmentée en deux catégories non recouvrantes:
• dérive structurelle,  
• dérive métier.

Aucune entité ne dispose d’un droit de correction automatique.  
Toute action corrective est initiée, encadrée et validée par Overseer conformément à CorrectionMode_Policy.


2. Définitions

2.1 Dérive structurelle

Une dérive structurelle correspond à toute anomalie relevant de la structure technique ou mécanique du système, incluant notamment:
• JSON invalide, incomplet ou corrompu,  
• non-respect d’un schéma universel ou spécialisé,  
• transition de workflow structurellement impossible,  
• incohérence des métadonnées détectée par l’orchestrateur,  
• dépassement d’un quota structurel défini par WorkflowPolicy,  
• répétition mécanique d’opérations identiques sans changement d’état (boucle structurelle).

Une dérive structurelle est détectée exclusivement par l’orchestrateur.

2.2 Dérive métier

Une dérive métier correspond à toute incohérence conceptuelle, stratégique ou sémantique, incluant notamment:
• contradictions entre documents référents,  
• boucle métier sans progression validée,  
• transitions métier incohérentes,  
• dégradation de la cohérence globale du projet,  
• corrections successives sans amélioration de l’état,  
• risques élevés signalés par SuperiorValidationAgent.

Une dérive métier n’est jamais détectée par l’orchestrateur.


3. Acteurs impliqués et responsabilités

• Orchestrateur: détecte uniquement les dérives structurelles, n’analyse jamais le métier.  
• Overseer: analyse les dérives métier, décide des actions correctives et pilote correctionMode.  
• SuperiorValidationAgent: détecte et qualifie les incohérences sémantiques locales et globales.  
• Agents producteurs: ne détectent, n’analysent et ne corrigent jamais les dérives.  
• Firestore: stockage passif sans rôle actif.


4. Mécanismes de détection

4.1 Détection structurelle

La détection structurelle est déclenchée lorsque:
• une validation de document échoue,  
• une transition de workflow est structurellement invalide,  
• une écriture viole le schéma ou les métadonnées,  
• un quota structurel est dépassé,  
• des opérations concurrentes anormales sont observées.

L’orchestrateur:
• interrompt immédiatement l’opération,  
• ne tente aucune réparation,  
• remonte une erreur structurelle à Overseer.

4.2 Détection métier

La détection métier est déclenchée lorsque:
• un verdict sémantique local ou global est block,  
• un verdict warn est associé à un risque élevé,  
• workflowImpact = major,  
• des incohérences narratives majeures sont détectées,  
• une absence de progression est constatée malgré des modifications successives.

Overseer décide explicitement de l’entrée en correctionMode.


5. États anti-dérive

5.1 État normal  
Aucune dérive détectée.

5.2 État warning  
Risque limité détecté sans blocage immédiat.  
L’opération peut se poursuivre sous contrôle et journalisation.

5.3 État correction (correctionMode)  
État transitoire de stabilisation activé par Overseer:
• un seul agent correctif autorisé,  
• aucune transition de workflow permise,  
• modifications strictement ciblées,  
• validation globale obligatoire avant sortie.

5.4 État halted  
État critique empêchant toute poursuite normale du système:
• corruption structurelle majeure,  
• impossibilité de restaurer une cohérence métier minimale.

Seule la procédure systemRecovery permet une sortie de cet état.


6. Protocole de réaction

6.1 Réaction à une dérive structurelle

1. Arrêt immédiat de l’opération par l’orchestrateur.  
2. Transmission d’une erreur structurelle détaillée à Overseer.  
3. Aucune tentative de correction automatique.  
4. Décision d’Overseer: abandon, retry contrôlé ou correctionMode.

6.2 Réaction à une dérive métier

1. Identification de la dérive par Overseer.  
2. Activation explicite de correctionMode.  
3. Production d’une instruction correctrice minimale.  
4. Production d’un document strict par un agent correctif.  
5. Validation structurelle par l’orchestrateur.  
6. Validation sémantique globale.  
7. Sortie de correctionMode uniquement si la stabilité est confirmée.

6.3 Passage à halted

Le passage à halted intervient uniquement si:
• correctionMode échoue à restaurer la cohérence,  
• ou une dérive structurelle bloque toute continuation.


7. Gestion des boucles

7.1 Boucles structurelles

Détection par l’orchestrateur:
• répétition mécanique d’opérations identiques,  
• transitions répétitives sans évolution d’état.

Réaction:
• arrêt immédiat,  
• erreur structurelle transmise à Overseer.

7.2 Boucles métier

Détection par Overseer:
• alternance répétée de corrections contradictoires,  
• absence de progression validée,  
• instabilité conceptuelle persistante.

Réaction:
• correctionMode obligatoire,  
• analyse globale renforcée,  
• warning ou block selon gravité.

Aucune boucle n’est autorisée dans le système.


8. Workflow et anti-dérive

• Aucune transition n’est déclenchée sans décision explicite d’Overseer.  
• L’orchestrateur exécute uniquement des transitions structurellement valides.  
• Toute transition susceptible d’induire une dérive métier est bloquée via SuperiorValidationAgent.


9. Journalisation

Tous les événements anti-dérive sont journalisés dans:
logs/{projectId}/driftEvents

Chaque entrée contient:
• timestamp,  
• operationId,  
• type: structural | semantic | correction | halted,  
• source: orchestrator | overseer | superiorValidationAgent,  
• details,  
• policies actives,  
• stateBefore,  
• stateAfter.


10. Invariants anti-dérive

Toujours vrais:

• Aucune réparation automatique côté orchestrateur.  
• Toute dérive métier impose correctionMode avant halted.  
• Toute dérive structurelle stoppe immédiatement l’opération.  
• Aucune transition workflow sans validation métier d’Overseer.  
• SuperiorValidationAgent ne corrige jamais et n’écrit jamais en base.  
• Overseer ne peut jamais forcer une sortie de correctionMode en présence d’un block.  
• halted ne peut être levé que par systemRecovery.  
• correctionMode est strictement temporaire.

Fin du document
---

Document Metadata & Changelog

Changelog:
  - 2.0.2 (2025-12-12): Clarification normative sans changement de responsabilités, explicitation des interdictions et alignement strict avec CorrectionMode_Policy.
  - 2.0.1 (2025-12-11): Normalisation de l’en-tête, alignement des noms de policies, correction terminologique.
  - 2.0.0 (2025-12-11): Refonte complète pour alignement avec Overseer v2, SuperiorValidationAgent, Workflow Engine v2 et CorrectionMode_Policy.
  - 1.0.0 (2025-12-10): Version initiale.

Breaking Changes:
  - Aucun depuis 2.0.0
